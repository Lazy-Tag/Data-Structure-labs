# 实验报告

[TOC]



## 航班查询系统使用方法

该系统使用模拟命令行的方式需用户进行交互（所有非法输入都会直接退回原循环中），用户在标准输入中输入需要查询的信息后可以在标准输出中后的结果。



## 主要应用的数据结构与算法

### 二叉堆：

#### 主要应用：

用于优化Dijkstra算法求最小化所需信息的航行路径。每次取出堆顶弹出，获得原点到堆顶的最短路，并拓展堆顶所能到达的所有点加入二叉堆中。

#### 复杂度分析：

取堆顶时间复杂度为$$O(1)$$插入与删除元素的时间复杂度为$$O(logm)$$，渐进意义$$O(k)$$, 整个数据结构的空间复杂度为$$O(n)$$。



### Dijkstra算法求最短路：

#### 主要应用：

求在起飞时间、到达时间、飞机机型的限制条件中最小化中转次数、中转时间、航行费用等数据的最优航行路径。

#### 复杂度分析：

每个进入二叉堆的点最多出队一次，每次二叉堆操作的时间复杂度为$$O(logm)$$, 总时间复杂度为$$O(nlogm)$$。二叉堆中最多存储$$O(n)$$个顶点，空间复杂度为$$O(n)$$。



### Floyd算法求每两点间的最短路：

#### 主要应用:

求不考虑时序性时两原编号点之间最少的中转次数，存于邻接矩阵中。在input函数中三重循环预处理，之后再checkNum函数中查询

#### 复杂度分析:

预处理时间复杂度为$$O(n^3)$$，其中n为原机场点。空间复杂度为存储连通性的邻接矩阵$$O(n^2)$$。



## 每个任务的具体实现：

### 初始化建图：

首先为了实现在同一个机场转机和转机的时序性，此lab将每一个原机场点拆成若干个出发时间段与到达时间段。首先将原机场店设置为图中对应的点。每一个原机场点连向机场所有的出发点，机场的所有的到达点连向原机场点。之后再每一个机场中将时间较早的到达点指向时间较晚的出发点实现转机。通过这种方式建图，控需要4e3的点与1e5的边。

### 2.1遍历

通过对队列与系统栈的辅助，实现对图的BFS与DFS遍历，将编号小于等于机场数的点加入vector中并排序。

#### 2.2可连通性

在建图中预处理的邻接矩阵中查询，若最大中转次数 + 1 小于等于当点值，这代表可到达，反之代表不可到达。之后再以邻接矩阵输出。

#### 2.3航线数目

在图中进行DFS搜索，并以中转次数为迭代深度限制，返回航线次数。

#### 2.4最短飞行时间

以飞行时间为第一关键字，编号为第二关键字利用Dijkstra算法求最小化飞行时间的最短路。

#### 2.5中转次数不超过k的航线

以中转次数为第一关键字，编号为第二关键字利用Dijkstra算法最小化中转次数，并忽略中转次数大于k的边。并且为了记录路径，每一个进入二叉堆的节点需要加入上一个发展节点与航线编号。之后再逆序输出已保存的航线编号。

#### 2.6最小航行费用航线

以航行费用为第一关键字，编号为第二关键字利用Dijkstra算法最小化航行费用。并且为了记录路径，每一个进入二叉堆的节点需要加入上一个发展节点与航线编号。之后再逆序输出已保存的航线编号。2.7

#### 2.7备选航线

以中转时间为第一关键字，中转次数第二关键字，在保证中转时间最小时，过滤中转次数大于k的路径。最后如果可以在相应时间内到达目的机场，则逆序输出返回的路径。

#### 2.8中转时间限制的最低航费

以航行费用为第一关键字，中转时间第二关键字，每次取航费最小的路径时，将中转时间的大于m的路径过滤。最后如果可以到达目的机场，则逆序输出返回路径。	



## 输出样例

### 2-1

#### BFS

![](C:\Users\HBW\Desktop\实验报告\运行结果\BFS.png)

#### DFS

![](C:\Users\HBW\Desktop\实验报告\运行结果\DFS.png)

### 2-2

![](C:\Users\HBW\Desktop\实验报告\运行结果\Conn.png)

### 2-3

![](C:\Users\HBW\Desktop\实验报告\运行结果\num.png)



### 2-4

![](C:\Users\HBW\Desktop\实验报告\运行结果\time.png)

### 2-5

#### time

![](C:\Users\HBW\Desktop\实验报告\运行结果\requ-tran-time.png)

#### model

![](C:\Users\HBW\Desktop\实验报告\运行结果\requ-tran-model.png)

### 2-6

#### time

![](C:\Users\HBW\Desktop\实验报告\运行结果\requ-fare-time.png)

#### model

![](C:\Users\HBW\Desktop\实验报告\运行结果\requ-fare-model.png)

### 2-7

![](C:\Users\HBW\Desktop\实验报告\运行结果\alter.png)

### 2-8

![](C:\Users\HBW\Desktop\实验报告\运行结果\fare-time.png)
