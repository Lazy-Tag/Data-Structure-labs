# 实验报告

[TOC]

## 实验实现思路

### 二叉树输入方式

对于每一个节点，依次输入id值、data值、是否有左、右子树。并将父节点设为传入的指针。若有左、右子树，则递归地构建其左、右子树，最后将指向该节点的指针返回作为其父节点的子节点。

### 遍历函数调用执行方式

得益于遍历函数返回值与参数值都相同，此程序采用函数指针数组的方式存储每一个成员函数，以模拟命令行的输入方式输入类型为参数决定函数指针数组中的下标，执行对应的遍历函数。

### 后序遍历迭代方式

算法通过一个辅助栈来实现，每次判断当前栈顶元素是否为该节点的父节点，若为父节点则代表该节点没有右兄弟节点，那么访问当前元素并将栈顶弹出；否则，该节点为当前节点的右兄弟节点，则将此右子树所有节点依次加入栈。对于当前节点，尽可能地往左走，若有左儿子，则判断左儿子是否有左儿子，若有，则进栈，并且将左儿子的右儿子也压入栈，否则右儿子进栈。当节点的左右儿子同时为空时，栈顶元素为空，弹出栈顶并退出循环，依次方式将子树中的点依次加入栈中。

### 求树中总结点数

通过递归地方式，遍历整棵二叉树，对于任意一棵子树，节点数为左右子树的节点数加上1。

### 求每个节点的所有子孙

通过递归地方式，遍历整棵二叉树。在每次函数调用时，定义一个空的vector，用来存该子树的所有节点。之后将此vector中所有节点加入参数中的vector中，并打印出此节点外的所有节点，顺序为该子树的中序遍历。

## 自测示例二叉树几何构型

![](./实验报告.assets/自测示例.png)



## 运行示例

```
//input.txt
1 2.5 1 1
2 1 1 1
3 5.5 1 0
5 15 1 1
6 6 0 0
7 13 0 1
8 8 0 0
4 -2 1 0
9 -3.5 0 0
10 3 1 1
11 7 1 1
13 9 0 0
14 10 1 1
15 9 1 0
17 -4 0 0
16 16 0 0
12 9 0 1
18 20 1 1
20 20 0 0
19 0 0 1
21 -8 0 0
```

## 运行结果

### 层次遍历

![](运行结果\level.png)

### 前序遍历迭代

![](./实验报告.assets/preByIter.png)

### 前序遍历递归

![](./实验报告.assets/InByRec.png)

### 中序遍历迭代

![](./实验报告.assets/InByIter.png)

### 中序遍历递归

![](./实验报告.assets/InByRec-1666861302229-4.png)

### 后序遍历迭代

![](./实验报告.assets/postByIter.png)

### 后序遍历递归

![](./实验报告.assets/postByRec.png)

### 总结点数

![](./实验报告.assets/number.png)

### 所有节点的子孙后代

![](./实验报告.assets/son1.png)

![](./实验报告.assets/son2.png)